<%rebase('base.html',title="Control ProducciÃ³n")
import utils
import datetime
from bottle import request

db = utils.ConnectDB()

id = request.GET.id
operacion =  request.GET.oper
componente = request.GET.comp
title = request.GET.title

if id and operacion and componente:
    db.execute("SELECT * FROM hoja_ruta_componentes WHERE idmat = %s and operacion = %s and componente = %s",[id,operacion,componente])
    vara = db.fetchone()
    locals().update(vara)
else:
    db.execute("DESCRIBE hoja_ruta_componentes")
    for row in db:
        locals().update({row['Field']:''})
    end
end

       
%>
<h2 class="ui header">{{title}} Componentes:</h2>
<div class="ui buttons">
  <a class="ui button" href="principal_componentes.html?id={{id}}">Componentes</a>
  <a class="ui button" href="principal.html">Hoja de Ruta</a>
</div>
<form class="ui form">
    <div class="field">
        <label>ID</label>
        <input type="text" name="idmat" value="{{id}}" required="" readonly>
    </div>
    <div class="field">
        <label>Operaci&oacute;n</label>
        <input type="text" name="operacion" value="{{operacion}}">
    </div>
    <div class="field">
        <label>Componente</label>
        <input type="text" name="componente" value="{{componente}}" required="" >
    </div>
    <div class="field">
        <label>Tipo</label>
        <select  name="tipo" >
                <option value="MO" {{'selected' if tipo=='MO' else ''}}>Mano de Obra</option>
                <option value="MP" {{'selected' if tipo=='MP' else ''}}>Materia Prima</option>
                <option value="MQ" {{'selected' if tipo=='MQ' else ''}}>Maquinaria</option>
                <option value="LP" {{'selected' if tipo=='LP' else ''}}>Muestras</option>
        </select>
    </div>
    <div class="field">
        <label>Operarios</label>
        <input type="number" name="operarios" value="{{operarios}}">
    </div>
    <div class="field">
        <label>Costo</label>
        <input type="number" step="any" name="costo" value="{{costo}}">
    </div>
    <div class="field">
        <label>Unidad</label>
        <input type="text" name="unidad" value="{{unidad}}" required="" maxlength="5">
    </div>
    <div class="field">
            <label>Cantidad</label>
            <input type="number" step="any" name="cantidad" value="{{cantidad}}" required="" >
    </div>

    <div class="ui buttons">
            <button class="ui button" type="submit" formaction="guardar_componentes.html" formmethod="POST">Guardar</button>
            <a class="ui button" href="edicion_componentes.html?id={{id}}&title={{'Crear'}}">Crear Otro</a>       
    </div>
</form>

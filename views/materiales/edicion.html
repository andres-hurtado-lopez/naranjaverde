<%rebase('base.html',title="Control ProducciÃ³n")
import utils
import datetime
from bottle import request

db = utils.ConnectDB()

id = request.GET.id

if id:
    db.execute("SELECT * FROM materiales WHERE idmat = %s",[id])
    vara = db.fetchone()
    locals().update(vara)
else:
    db.execute("DESCRIBE materiales")
    for row in db:
        locals().update({row['Field']:''})
    end
end

       
%>
<h2 class="ui header">Edicion Material:</h2>

<div class="ui search fluid selection dropdown optionmenu">
        <input type="hidden" name="opciones">
        <div class="text">Menu</div>
        <i class="dropdown icon"></i>
        <div class="menu">
            <div class="item" data-value="">Menu</div>
            <div class="item" data-value="/home.html">Inicio</div>
            <div class="item" data-value="/materiales/principal.html">Materiales</div>
        </div>
    </div>  

<form class="ui form">
    <div class="field">
        <label>ID</label>
        <input type="text" name="idmat" value="{{idmat}}" required="">
    </div>
    <div class="field">
        <label>Descripci&oacute;n</label>
        <input type="text" name="descripcion" value="{{descripcion}}">
    </div>
    <div class="field">
        <label>Grupo 1</label>
        <select id="grupo1" name="grupo1" >
                <option value="MPP">MPP - Producto Terminado</option>
                <option value="MPF">MPF - Materia Prima para Fabricaciion</option>
                <option value="Insu">Insu - Insumo</option> 
        </select>

    </div>
    <div class="field">
        <label>Grupo 2</label>
        <input type="text" name="grupo2" value="{{grupo2}}">
    </div>
    <div class="field">
        <label>Grupo 3</label>
        <input type="text" name="grupo3" value="{{grupo3}}">
    </div>
    <div class="field">
        <label>Grupo 4</label>
        <input type="text" name="grupo4" value="{{grupo4}}">
    </div>
    <div class="field">
        <label>Unidad</label>
        <select name="unidad" id="unidades">
                <option value="kg">kg</option>
                <option value="un">un</option>
                <option value="l">l</option>
                <option value="m">m</option>
        </select>
    </div>
    <div class="field">
        <label>Costo</label>
        <input type="text" name="costo" value="{{costo}}" required="" >
    </div>

    <div class="ui buttons">
            <button class="ui button" type="submit" formaction="guardar.html" formmethod="POST">Guardar</button>
            <a class="ui button" href="edicion.html">Crear Otro</a>       
    </div>
</form>

<script>

$('#unidades').dropdown('set selected','{{grupo1}}');
$('#unidades').dropdown('set selected','{{unidad}}');

        $('.ui.dropdown.optionmenu').dropdown({
        action:function(text, value){    
        window.location.href = value;}
    })

</script>